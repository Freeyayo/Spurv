"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=Symbol.for("relationtree_children_Symbol"),e=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];var n=t[0],i=n.length;return t.length-1<i?e.bind.apply(e,[null].concat(t)):n.apply(void 0,t.slice(1))},r=function(t,e){void 0===e&&(e={levels:Number.POSITIVE_INFINITY});var n=e.levels?Number(e.levels):0;if(!Array.isArray(t))throw new Error("flatten accepts an array and safe answer '[]' returned");return 0===n?t:t.reduce((function(t,e){return Array.isArray(e)?t.concat(r(e,{levels:n-1})):t.concat(e)}),[])},n=function(t,e){if("object"==typeof t&&"object"==typeof e){if(Array.isArray(t)&&Array.isArray(e)&&t.length!==e.length)return!1;for(var r=Object.getOwnPropertyNames(t),i=0,o=r.length;i<o;i++){var a=r[i];if(t[a]!==e[a]){if("object"==typeof t[a]&&"object"==typeof e[a]){if(n(t[a],e[a]))continue;return!1}return!1}}return!0}return t===e},i=function(e,r){if(!(Array.isArray(e)&&r&&r.id&&r.parentId))throw new Error("relationTree must have two arguments: data:[] and options:{root,id,parentId}");var n=[];try{var o=e.filter((function(t,e){if(t[r.parentId]===r.root)return n.push(e),t[r.parentId]===r.root}));if(0===o.length)return;for(var a=0,s=n.length;a<s;a++)e.slice(a,1);return o.forEach((function(n){n[t]=i(e,{root:n[r.id],id:r.id,parentId:r.parentId})})),o}catch(t){throw new Error("relationTree must have two arguments: data:[] and options:{root,id,parentId}, they will be used to build the tree")}},o=function(t){if(this._items={},this._length=0,t){if("object"!=typeof t)throw new TypeError("Spurv: initial data must be an object");for(var e in t)this.add(e,t[e])}},a={length:{configurable:!0}};a.length.get=function(){return this._length},o.prototype._getKeyAsString=function(t){if(void 0===t)throw new TypeError("Spurv: key is undefined");return"object"==typeof t?JSON.stringify(t):t.toString()},o.prototype.add=function(t,e){var r=this._getKeyAsString(t);r in this._items||this._length++,this._items[r]=e},o.prototype.clear=function(){this._items={},this._length=0},o.prototype.containsKey=function(t){var e=this._getKeyAsString(t);return Object.keys(this._items).includes(e)},o.prototype.containsValue=function(t){var e=this._getKeyAsString(t);return Object.values(this._items).includes(e)},o.prototype.get=function(t){var e=this._getKeyAsString(t);return this._items[e]||void 0},o.prototype.remove=function(t){var e=this._getKeyAsString(t);e in this._items&&this._length--,delete this._items[e]},o.prototype.keys=function(){return Object.keys(this._items)},o.prototype.entries=function(){return Object.entries(this._items)},o.prototype.values=function(){return Object.values(this._items)},Object.defineProperties(o.prototype,a);var s;!function(t){t.Min="min",t.Max="max"}(s||(s={}));var u=function(t,e){void 0===t&&(t=[]),void 0===e&&(e={}),this._heap=[null],this._length=0,this._type=e.type||s.Min,this._compareKey=e.compareKey||"value",this._initialize(t||[])},h={length:{configurable:!0}};h.length.get=function(){return this._length},u.prototype.clear=function(){this._heap=[null],this._length=0},u.prototype.delete=function(t){var e=this,r=this._heap.findIndex((function(r,n){return e._getValueAtIndex(n)===t}));r>0&&(this._swapNodes(r,this._length),this._heap.splice(-1),this._length--,this._sinkDown(r))},u.prototype.pop=function(){if(0!==this._length){var t=this._heap[1];return this._heap[1]=this._heap[this._length],this._heap.splice(-1),this._length--,this._sinkDown(1),t}},u.prototype.push=function(t){this._length++,this._heap[this._length]=this._shallowCopy(t),this._length>1&&this._bubbleUp(this._length)},u.prototype.peek=function(){return this._shallowCopy(this._heap[1])},u.prototype.toArray=function(){var t=this;return this._heap.map((function(e){return t._shallowCopy(e)}))},u.prototype._initialize=function(t){var e=this;t.forEach((function(t){if("object"!=typeof t||Array.isArray(t))throw new TypeError("Spurv: initial data must be an array of objects");e.push(t)}))},u.prototype._getParentIndex=function(t){if(1!==t)return Math.floor(t/2)},u.prototype._getLeftChildIndex=function(t){var e=2*t;return this._heap[e]?e:void 0},u.prototype._getRightChildIndex=function(t){var e=2*t+1;return this._heap[e]?e:void 0},u.prototype._getValueAtIndex=function(t){if(this._heap[t])return this._heap[t][this._compareKey]},u.prototype._compare=function(t,e){var r=this._getValueAtIndex(t),n=this._getValueAtIndex(e);return r===n?0:r<n?-1:1},u.prototype._bubbleUp=function(t){for(var e=t,r=this._getParentIndex(e),n=this._type===s.Min?1:-1;r&&this._compare(e,r)*n<0;)this._swapNodes(e,r),e=r,r=this._getParentIndex(e)},u.prototype._sinkDown=function(t){if(t&&this._heap[t]){var e=this._type===s.Min?1:-1,r=t,n=this._getLeftChildIndex(r),i=this._getRightChildIndex(r);n&&this._compare(r,n)*e>0&&(r=n),i&&this._compare(r,i)*e>0&&(r=i),t!==r&&(this._swapNodes(t,r),this._sinkDown(r))}},u.prototype._shallowCopy=function(t){return Object.assign({},t)},u.prototype._swapNodes=function(t,e){var r;r=[this._heap[e],this._heap[t]],this._heap[t]=r[0],this._heap[e]=r[1]},Object.defineProperties(u.prototype,h);var l=function(t){this.element=t,this.next=null},p=function(){this._length=0,this._head=null};p.prototype.append=function(t){var e=new l(t);if(null===this._head)this._head=e;else{for(var r=this._head;r.next;)r=r.next;r.next=e}return this._length++,!0},p.prototype.insert=function(t,e){if(t>=0&&t<=this._length){var r=new l(e),n=this._head,i=0,o=null;if(0===t)r.next=n,this._head=r;else{for(;i++<t;)o=n,n=n.next;o.next=r,r.next=n}return this._length++,!0}return!1},p.prototype.removeAt=function(t){if(t>-1&&t<this._length){var e=this._head,r=0,n=null;if(0===t)this._head=e.next;else{for(;r++<t;)n=e,e=e.next;n.next=e.next}return this._length--,!0}return!1},p.prototype.remove=function(t){var e=this.indexOf(t);return-1!==e&&this.removeAt(e)},p.prototype.indexOf=function(t){for(var e=this._head,r=0;e;){if(t===e.element)return r;e=e.next,r++}return-1},p.prototype.isEmpty=function(){return 0===this._length},p.prototype.size=function(){return this._length},p.prototype.getHead=function(){return this._head};exports.binaryHeap=function(t,e){return void 0===t&&(t=[]),new u(t,e)},exports.bsTree=function(t){var e=function(t){var e=Object.create(null);return Object.assign(e,{val:t,left:null,right:null})},r=function(t,e){if(e.val<t.val)null===t.left?t.left=e:r(t.left,e);else{if(!(e.val>t.val))throw new Error("you passed a duplicate value to binary search tree, Spurv ignored it");null===t.right?t.right=e:r(t.right,e)}},n=null;return Number.isNaN(Number(t))||(n=e(Number(t))),{insert:function(t){if(null===n)return n=e(t);var i=e(t);return r(n,i),n},getHead:function(){return n}}},exports.compose=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return function(e){return t.reduce((function(t,e){if("function"!=typeof e||1!==e.length)throw new Error("compose accepts pure function(s) which needs only 1 argument");try{return e(t)}catch(t){throw new Error(t)}}),e)}},exports.curry=e,exports.deserialize=function(t){if(null===t)return null;var e=function(t){var e=Object.create(null);return Object.assign(e,{val:t,left:null,right:null})},r=function(t){return"null"===t||void 0===t?null:e(Number(t))},n=[];try{var i=t.slice(1,-1).split(","),o=i.shift();if("null"===o)return null;if(isNaN(Number(o)))throw new Error("check your input");var a=e(Number(o));for(n.push(a);n.length;)for(var s=n.length,u=0;u<s;u++){var h=n.shift();if(h){var l=r(i.shift()),p=r(i.shift());h.left=l,h.right=p,null!==l&&n.push(l),null!==p&&n.push(p)}}return a}catch(t){throw new Error(t)}},exports.dictionary=function(t){return new o(t)},exports.factorial=function(t){if(isNaN(t)||t<0||t>170)throw new Error("number 'n'(0 <= n <= 170) expected and safe answer '1' returned");if(0===t)return 1;if(t<=99){for(var e=1,r=1;r<=t;r++)e*=r;return e}if(t>99){for(var n=BigInt(1),i=1;i<=t;i++)n*=BigInt(i);return Number(n)}},exports.flatten=r,exports.intersect=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(0===t.length)return[null];var n=t.reduce((function(t,e){if(Array.isArray(t)&&Array.isArray(e))return t.filter((function(t){return e.includes(t)}));throw new Error("Array<number> expected and safe answer '[]' returned")}));return Array.from(new Set(r(n)))},exports.isEqual=n,exports.linkedList=function(){return new p},exports.privateMode=function(t){var e=function(t,e){if("_"===t[0]&&"_"!==t[1])throw new Error("Invalid attempt to "+e+' private "'+t+'" property')};return function(t){return new Proxy(t,{get:function(t,r){return e(r,"get"),Reflect.get(t,r)},set:function(t,r,n){return e(r,"set"),Reflect.set(t,r,n),!0}})}(t)},exports.randomizeArray=function(t){var e;if(Array.isArray(t)){for(var r=t.length,n=0;n<r;n++){var i=Math.floor(Math.random()*r);e=[t[i],t[n]],t[n]=e[0],t[i]=e[1]}return t}throw new Error("randomizeArray needs an array as its argument")},exports.relationTree=i,exports.rtchildren=t,exports.serialize=function(t){if(null===t)return null;var e=[],r=[];r.push(t);try{for(;r.length;)for(var n=r.length,i=0;i<n;i++){var o=r.shift();null!==o?(e.push(o.val),r.push(o.left),r.push(o.right)):e.push("null")}for(;"null"===e[e.length-1];)e.pop();return"["+e.toString()+"]"}catch(t){throw new Error(t)}},exports.sortArrayBy=function(t,e){void 0===e&&(e={tar:[],rev:!1}),e.tar||(e.tar=[]);if(!Array.isArray(t))throw new TypeError("make sure you passed an array");if(Array.isArray(e.tar))return 0===e.tar.length?t.sort((function(t,r,n){return void 0===n&&(n=e.rev),n?t<r?1:t>r?-1:0:t<r?-1:t>r?1:0})):t.sort((function(t,r,n){void 0===n&&(n=e.rev);var i=e.tar,o=function(t){return i.reduce((function(t,e){return t[e]}),t)},a=o(t),s=o(r);return n?a<s?1:a>s?-1:0:a<s?-1:a>s?1:0}))},exports.union=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(0===t.length)return[null];var n=t.map((function(t){if(Array.isArray(t))return t;throw new Error("Array<number> expected and safe answer '[]' returned")}));return Array.from(new Set(r(n)))};
